version: '3'

services:
    security_camera:
        build: ./camera
        volumes: 
            - E:/security_camera/data:/opt/build/data
            - E:/security_camera/logs:/opt/build/logs
        secrets:
            - example
        environment:
            - sleeptime=5
            - camera_url=rtsp://admin:@192.168.50.30:554/h264Preview_01_main
            - camera_name=testcamera
        ports:
          - "5000:5000"
    db:
        image: "mcr.microsoft.com/mssql/server:2019-latest"
        environment:
            ACCEPT_EULA: "Y"
        env_file:
            - ./secrets/db_password
        secrets:
            example:
                file: .secrets\env
            db_password:
                file: ./secrets/db_password
